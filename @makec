#!/bin/bash

######### commands specific to this project #############

test=test01
mkdir -p intermediate

## the next 5 lines are for expository purposes only - grid-identity.rwr shows how to do "nothing" (output == input)
##  but, this checks for basic typos and that the scripts are OK
echo
echo '*** identity (output == input) ***'
cat ${test}.grid |\
    ${PBP}/t2t prepass | tee ./intermediate/pre-identity.grid |\
    ${PBP}/t2t grid grid-identity | tee ./intermediate/${test}-identity.grid

echo
echo '*** semantic checking (identity if OK) ***'
cat ${test}.grid |\
    ${PBP}/t2t prepass | tee ./intermediate/pre-identity.grid |\
    ${PBP}/t2t grid grid-semcheck | tee ./intermediate/${test}-semcheck.grid

echo
echo '*** Python ***'
cat ${test}.grid |\
    ${PBP}/t2t prepass | tee ./intermediate/pre.grid |\
    ${PBP}/t2t grid | tee ./intermediate/${test}.grid |\
    ${PBP}/t2t postpass | tee ./intermediate/post.grid |\
    ${PBP}/indent | tee ./intermediate/indent.grid >test.py
cat test.py

# ## more expository - delete later
# echo
# echo '*** Run ***'
# python test.py

### ./intermediate contains the intermediate generated files - you might want to look at these while debugging the
###  compiler, else, delete the "| tee ... |\" stuff above

# ### temp.* files are created by t2t, comment out this line in case you want to debug the PBP tools
rm temp.*

############################



