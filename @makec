#!/bin/bash
set -o pipefail
export SHELLOPTS

######### commands specific to this project #############

test=test01
mkdir -p intermediate

## test0
echo "--------- test 0 ------------"
export test=test0
./identity | ./emit-python >test.py
./run-python test.py

echo
echo "--------- test 01 ------------"
export test=test01
./identity | ./semantics | ./emit-python >test.py
cat test.py

echo
echo "--------- test 02 (should fail on error) ------------"
# again, with semantic error
export test=test02
./identity | ./semantics | ./emit-python >fail.py


### ./intermediate contains the intermediate generated files - you might want to look at these while debugging the
###  compiler, else, delete the "| tee ... |\" stuff above

# ### temp.* files are created by t2t, comment out this line in case you want to debug the PBP tools
rm temp.*

############################



